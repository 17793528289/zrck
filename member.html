<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šå‘˜ä¸­å¿ƒ - æ­¦å¨ç¬¬åå…«ä¸­å­¦å“ç„¶åˆ›å®¢ç¤¾å›¢</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <style>
        .member-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .member-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .user-info-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .member-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .logout-btn:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2><a href="index.html" style="color: white; text-decoration: none;">å“ç„¶åˆ›å®¢</a></h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="about.html">å…³äºæˆ‘ä»¬</a></li>
                <li><a href="activities.html">æ´»åŠ¨å±•ç¤º</a></li>
                <li><a href="projects.html">é¡¹ç›®æˆæœ</a></li>
                <li><a href="join.html">åŠ å…¥æˆ‘ä»¬</a></li>
                <li class="user-menu">
                    <span id="userWelcome">æ¬¢è¿è®¿é—®</span>
                    <div class="user-dropdown">
                        <button onclick="logout()" class="logout-btn">é€€å‡ºç™»å½•</button>
                    </div>
                </li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- ä¼šå‘˜ä¸­å¿ƒå†…å®¹ -->
    <div class="member-container">
        <div class="member-header">
            <h1 id="mainWelcome">æ¬¢è¿æ¥åˆ°ä¼šå‘˜ä¸­å¿ƒ</h1>
            <p>ä¸“å±èµ„æº Â· ä¸ªæ€§æœåŠ¡ Â· æˆé•¿è®°å½•</p>
        </div>

        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <div class="user-info-card">
            <h2>ä¸ªäººä¿¡æ¯</h2>
            <div class="info-grid">
                <div class="info-item">
                    <strong>å§“åï¼š</strong>
                    <span id="userName">åŠ è½½ä¸­...</span>
                </div>
                <div class="info-item">
                    <strong>ç­çº§ï¼š</strong>
                    <span id="userGrade">åŠ è½½ä¸­...</span>
                </div>
                <div class="info-item">
                    <strong>è§’è‰²ï¼š</strong>
                    <span id="userRole">åŠ è½½ä¸­...</span>
                </div>
                <div class="info-item">
                    <strong>ç™»å½•æ—¶é—´ï¼š</strong>
                    <span id="loginTime">åŠ è½½ä¸­...</span>
                </div>
            </div>
            
            <div id="adminAccess" style="margin-top: 20px;"></div>
        </div>

        <!-- ä¼šå‘˜ä¸“å±åŠŸèƒ½ -->
        <div class="member-features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“š</div>
                <h3>å­¦ä¹ èµ„æº</h3>
                <p>è®¿é—®ä¸“å±æ•™ç¨‹ã€é¡¹ç›®èµ„æ–™å’Œç«èµ›æŒ‡å—</p>
                <button class="btn btn-primary" onclick="accessResources()">è¿›å…¥èµ„æºåº“</button>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ¯</div>
                <h3>é¡¹ç›®ç®¡ç†</h3>
                <p>ç®¡ç†ä¸ªäººé¡¹ç›®ï¼Œè·Ÿè¸ªè¿›åº¦ï¼Œè·å¾—æŒ‡å¯¼</p>
                <button class="btn btn-primary" onclick="manageProjects()">æˆ‘çš„é¡¹ç›®</button>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">ğŸ“Š</div>
                <h3>æˆé•¿è®°å½•</h3>
                <p>æŸ¥çœ‹å‚ä¸æ´»åŠ¨ã€è·å¾—æˆå°±å’ŒæŠ€èƒ½æˆé•¿</p>
                <button class="btn btn-primary" onclick="viewProgress()">æŸ¥çœ‹è®°å½•</button>
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>å“ç„¶åˆ›å®¢ç¤¾å›¢</h3>
                    <p>æ­¦å¨ç¬¬åå…«ä¸­å­¦</p>
                    <p>åœ°å€ï¼šç”˜è‚ƒçœæ­¦å¨å¸‚å‡‰å·åŒºå‡¤å‡°è·¯163å·</p>
                </div>
                <div class="footer-section">
                    <h3>å¿«é€Ÿé“¾æ¥</h3>
                    <ul>
                        <li><a href="index.html">é¦–é¡µ</a></li>
                        <li><a href="about.html">å…³äºæˆ‘ä»¬</a></li>
                        <li><a href="activities.html">æ´»åŠ¨å±•ç¤º</a></li>
                        <li><a href="projects.html">é¡¹ç›®æˆæœ</a></li>
                        <li><a href="join.html">åŠ å…¥æˆ‘ä»¬</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»æˆ‘ä»¬</h3>
                    <p>é‚®ç®±ï¼š2959665467@qq.com</p>
                    <p>ç”µè¯ï¼š17793528289</p>
                    <p>æŒ‡å¯¼è€å¸ˆï¼šå¼ è€å¸ˆ</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 æ­¦å¨ç¬¬åå…«ä¸­å­¦å“ç„¶åˆ›å®¢ç¤¾å›¢. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ä¼šå‘˜é¡µé¢ç™»å½•æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ä¼šå‘˜é¡µé¢åŠ è½½...');
            
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            const currentUser = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
            
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•ï¼');
                window.location.href = 'index.html';
                return;
            }
            
            try {
                const user = JSON.parse(currentUser);
                const username = sessionStorage.getItem('username') || localStorage.getItem('username');
                const loginTime = sessionStorage.getItem('loginTime') || localStorage.getItem('loginTime');
                
                console.log('æ¬¢è¿ç”¨æˆ·:', user.name);
                
                // å®‰å…¨æ›´æ–°é¡µé¢æ˜¾ç¤º
                updateElementText('userWelcome', `æ¬¢è¿ï¼Œ${user.name}`);
                updateElementText('mainWelcome', `æ¬¢è¿å›æ¥ï¼Œ${user.name}ï¼`);
                updateElementText('userName', user.name || 'æœªè®¾ç½®');
                updateElementText('userGrade', user.grade || 'æœªè®¾ç½®');
                updateElementText('userRole', user.role === 'admin' ? 'ç®¡ç†å‘˜' : 
                                 user.role === 'teacher' ? 'æ•™å¸ˆ' : 'å­¦ç”Ÿ');
                updateElementText('loginTime', loginTime || 'åˆšåˆš');
                
                // å¦‚æœæ˜¯ç®¡ç†å‘˜ï¼Œæ˜¾ç¤ºç®¡ç†å…¥å£
                if (user.role === 'admin' || user.role === 'teacher') {
                    updateElementHTML('adminAccess', 
                        '<a href="admin-panel.html" class="btn btn-warning">âš™ï¸ ç®¡ç†åå°</a>');
                }
            } catch (error) {
                console.error('å¤„ç†ç”¨æˆ·æ•°æ®æ—¶å‡ºé”™:', error);
                alert('ç”¨æˆ·æ•°æ®å¼‚å¸¸ï¼Œè¯·é‡æ–°ç™»å½•ï¼');
                window.location.href = 'index.html';
            }
        });

        // å®‰å…¨æ›´æ–°å…ƒç´ æ–‡æœ¬å†…å®¹
        function updateElementText(elementId, text) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = text;
            } else {
                console.warn(`å…ƒç´  #${elementId} ä¸å­˜åœ¨`);
            }
        }

        // å®‰å…¨æ›´æ–°å…ƒç´ HTMLå†…å®¹
        function updateElementHTML(elementId, html) {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = html;
            } else {
                console.warn(`å…ƒç´  #${elementId} ä¸å­˜åœ¨`);
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                sessionStorage.clear();
                localStorage.removeItem('currentUser');
                localStorage.removeItem('username');
                localStorage.removeItem('loginTime');
                window.location.href = 'index.html';
            }
        }

        // ä¼šå‘˜åŠŸèƒ½å‡½æ•°ï¼ˆç¤ºä¾‹ï¼‰
        function accessResources() {
            alert('èµ„æºåº“åŠŸèƒ½å¼€å‘ä¸­...');
        }

        function manageProjects() {
            alert('é¡¹ç›®ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...');
        }

        function viewProgress() {
            alert('æˆé•¿è®°å½•åŠŸèƒ½å¼€å‘ä¸­...');
        }
    </script>
</body>
</html>
