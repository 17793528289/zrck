<script>
// 会员页面登录检查
document.addEventListener('DOMContentLoaded', function() {
    console.log('会员页面加载...');
    
    // 检查登录状态
    const currentUser = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
    
    if (!currentUser) {
        alert('请先登录！');
        window.location.href = 'index.html';
        return;
    }
    
    const user = JSON.parse(currentUser);
    const username = sessionStorage.getItem('username') || localStorage.getItem('username');
    
    console.log('欢迎用户:', user.name);
    
    // 更新页面显示
    document.getElementById('userWelcome').textContent = `欢迎，${user.name}`;
    document.getElementById('mainWelcome').textContent = `欢迎回来，${user.name}！`;
    document.getElementById('userName').textContent = user.name;
    document.getElementById('userGrade').textContent = user.grade;
    
    // 如果是管理员，显示管理入口
    if (user.role === 'admin' || user.role === 'teacher') {
        document.getElementById('adminAccess').innerHTML = 
            '<a href="admin-panel.html" class="btn btn-warning">⚙️ 管理后台</a>';
    }
});

// 退出登录
function logout() {
    if (confirm('确定要退出登录吗？')) {
        sessionStorage.clear();
        localStorage.removeItem('currentUser');
        localStorage.removeItem('username');
        window.location.href = 'index.html';
    }
}
</script>
